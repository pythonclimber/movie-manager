<Page xmlns="http://schemas.nativescript.org/tns.xsd" class="page" navigatingTo="navigatingTo">
    <StackLayout>
        <GridLayout class="action-bar" columns="*, auto">
            <StackLayout tap="backTap" orientation="horizontal" class="action-wrap" horizontalAlignment="left" verticalAlignment="center">
                <Label text="Back" class="back-text" />
            </StackLayout>
            <Label col="1" text="{{ TotalResults }}" verticalAlignment="center" />
        </GridLayout>
        <GridLayout columns="*" rows="auto, *" class="search-text-layout">
            <StackLayout>
                <!-- <TextField text="{{ searchText }}" hint="Search movie title..." class="search-text" />
                <Label text="A value is required to perform a search" color="red" visibility="{{ searchError ? 'visible' : 'collapse' }}" />
                <Button text="Search" tap="{{ searchForMovie }}" class="btn" /> -->
                <SearchBar id="movie-search" hint="Search movie title..." text="{{ SearchText }}" class="search-text" clear="{{ ClearSearch }}" submit="{{ SearchForMovie }}" />
            </StackLayout>
            <GridLayout row="1" columns="*" rows="auto, *">
                <Label text="No Results..." visibility="{{ SearchResults.length == 0 && !isLoading ? 'visible' : 'collapse' }}" horizontalAlignment="center" />
                <ScrollView row="1">
                    <ListView row="1" class="movie-list" items="{{ SearchResults }}" loadMoreItems="{{ GetNextPage }}" itemTap="selectMovie" visibility="{{ SearchResults.length > 0 && !isLoading ? 'visible' : 'collapse' }}">
                        <ListView.itemTemplate>
                            <GridLayout columns="auto, *" rows="auto">
                                <GridLayout col="0" columns="auto">
                                    <Image class="icon-image" src="{{ ImageSource }}" width="30" height="45" />
                                </GridLayout>
                                <StackLayout col="1">
                                    <Label text="{{ Title }}" class="info-bigger" />
                                    <Label text="{{ Year }}" class="info-orange" />
                                </StackLayout>
                            </GridLayout>
                        </ListView.itemTemplate>
                    </ListView>
                </ScrollView>
                <ActivityIndicator busy="{{ IsLoading }}" row="1" horizontalAlignment="center" verticalAlignment="center" />
            </GridLayout>
        </GridLayout>
    </StackLayout>
</Page>