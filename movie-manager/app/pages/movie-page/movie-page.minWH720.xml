<Page xmlns="http://schemas.nativescript.org/tns.xsd" class="page" navigatingTo="navigatingTo">    
    <StackLayout>
        <GridLayout class="action-bar" columns="*, auto" height="88">
            <StackLayout tap="backTap" orientation="horizontal" class="action-wrap" horizontalAlignment="left" verticalAlignment="center">
                <Label text="Back" class="back-text" fontSize="32" />
            </StackLayout>
            <StackLayout tap="{{ GoToMyMovies }}" col="1" orientation="horizontal" class="action-wrap" verticalAlignment="center" visibility="{{ Flow == MovieFlowSearch ? 'visible' : 'hidden' }}">
                <Label text="My Movies" class="back-text" fontSize="32" />
            </StackLayout>
        </GridLayout>
        <GridLayout>
            <ScrollView>
                <GridLayout rows="auto, auto, *"  visibility="{{ IsLoading ? 'hidden' : 'visible' }}">
                    <GridLayout row="0" columns="auto, *">
                        <GridLayout class="image-layout">
                            <Image src="{{ ImageSource }}" stretch="aspectFill" width="360" height="540" horizontalAlignment="left" verticalAlignment="top" />
                        </GridLayout>
                        <StackLayout class="title-layout" col="1">
                            <Label text="{{ Title + ' (' + Year + ')' }}" class="main-title-tablet" textWrap="true" />
                            <Label text="{{ Director }}" class="director-info"/>
                            <Label text="{{ Format }}" class="director-info"/>
                            <GridLayout tap="{{ AddRating }}" visibility="{{ Flow == MovieFlowCollection && !Wishlist ? 'visible' : 'collapse' }}">
                                <GridLayout columns="auto,auto,auto,auto,auto" visibility="{{ !Rating ? 'collapse' : 'visible' }}">
                                    <Image id="star-1" height="48" width="48" col="0" src="{{ Rating >= 2 ? 'res://star_green_1024' : (Rating >= 1 ? 'res://star_half_1024' : 'res://star_white_1024') }}" />
                                    <Image id="star-2" height="48" width="48" col="1" src="{{ Rating >= 4 ? 'res://star_green_1024' : (Rating >= 3 ? 'res://star_half_1024' : 'res://star_white_1024') }}" />
                                    <Image id="star-3" height="48" width="48" col="2" src="{{ Rating >= 6 ? 'res://star_green_1024' : (Rating >= 5 ? 'res://star_half_1024' : 'res://star_white_1024') }}" />
                                    <Image id="star-4" height="48" width="48" col="3" src="{{ Rating >= 8 ? 'res://star_green_1024' : (Rating >= 7 ? 'res://star_half_1024' : 'res://star_white_1024') }}" />
                                    <Image id="star-5" height="48" width="48" col="4" src="{{ Rating >= 9.9 ? 'res://star_green_1024' : (Rating >= 9 ? 'res://star_half_1024' : 'res://star_white_1024') }}" />
                                </GridLayout>
                                <Label color="#009940" text="Click to rate" textDecoration="underline" fontSize="36" visibility="{{ !Rating ? 'visible' : 'collapse' }}" />
                            </GridLayout>
                        </StackLayout>
                    </GridLayout>
                    <GridLayout row="1" columns="*, *">
                        <GridLayout col="0">
                            <Button visibility="{{ !UserId || Wishlist ? 'visible' : 'hidden' }}" text="Add" width="250" height="80" class="btn" android:fontSize="20" ios:fontSize="36" horizontalAlignment="center" tap="{{ AddToMyCollection }}" />
                            <Button visibility="{{ !UserId || Wishlist ? 'hidden' : 'visible' }}" text="Remove" width="250" height="80" class="btn" android:fontSize="20" ios:fontSize="36" horizontalAlignment="center" tap="{{ RemoveFromMyCollection }}" />
                        </GridLayout>
                        <GridLayout col="1">
                            <Button text="Wishlist" width="250" height="80" class="btn" android:fontSize="20" ios:fontSize="36" horizontalAlignment="center" tap="{{ AddToWishlist }}" visibility="{{ !UserId ? 'visible' : 'hidden'}}" />
                            <Button text="Un-wishlist" width="250" height="80" class="btn" android:fontSize="20" ios:fontSize="36" horizontalAlignment="center" tap="{{ RemoveFromMyCollection }}" visibility="{{ UserId && Wishlist ? 'visible' : 'hidden'}}" />
                            <Button text="Edit Formats" width="250" height="80" class="btn" android:fontSize="20" ios:fontSize="36" horizontalAlignment="center" tap="{{ AddFormats }}" visibility="{{ !UserId || Wishlist ? 'hidden' : 'visible' }}" />
                        </GridLayout>
                    </GridLayout>
                    <GridLayout row="2" colSpan="2" class="plot-layout">
                        <Label  text="{{ Plot }}" textWrap="true" fontSize="32" margin="0 0 0 10" />
                    </GridLayout>
                </GridLayout>
            </ScrollView>
            <ActivityIndicator busy="{{ IsLoading || IsPaused }}" color="#009940" row="1" horizontalAlignment="center" verticalAlignment="center" />
        </GridLayout>
    </StackLayout>
</Page>