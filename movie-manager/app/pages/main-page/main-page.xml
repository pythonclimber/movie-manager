<Page xmlns="http://schemas.nativescript.org/tns.xsd" 
        navigatingTo="navigatingTo" 
        class="page"
        xmlns:drawer="nativescript-telerik-ui/sidedrawer"
        xmlns:PullRefresh="nativescript-pulltorefresh">
    <StackLayout>
        <GridLayout class="action-bar" columns="*, *, *">
            <StackLayout col="0" tap="searchTap" orientation="horizontal" class="action-wrap" horizontalAlignment="stretch" verticalAlignment="center">
                <Label text="Search" class="back-text" />
            </StackLayout>
        </GridLayout>
        <GridLayout rows="auto, auto">
            <GridLayout columns="auto, auto" height="30">
                <Label text="Filter:" verticalAlignment="center" padding="5" />
                <StackLayout orientation="horizontal" col="1" class="selected-filter" margin="5,0">
                    <Label text="{{ FilterMode }}" verticalAlignment="center" tap="{{ ChangeFilter }}" horizontalAlignment="center" padding="0,5" />
                </StackLayout>
                <!-- <ListPicker col="1" items="{{ Filters }}" selectedIndex="{{ SelectedIndex }}" /> -->
            </GridLayout>
            <GridLayout row="1" height="30"  visibility="{{ DisplayFilters ? 'visible' : 'collapse' }}" columns="25, *, *, *">
                <Label col="1" class="{{ FilterMode == 'All Movies' ? 'selected-filter' : 'unselected-filter' }}" text="All Movies" verticalAlignment="center" horizontalAlignment="left" tap="{{ ChangeFilter }}" />
                <Label col="2" class="{{ FilterMode == 'Favorites' ? 'selected-filter' : 'unselected-filter' }}" text="Favorites" verticalAlignment="center" horizontalAlignment="left" tap="{{ ChangeFilter }}" />
                <Label col="3" class="{{ FilterMode == 'Wishlist' ? 'selected-filter' : 'unselected-filter' }}" text="Wishlist" verticalAlignment="center" horizontalAlignment="left" tap="{{ ChangeFilter }}" />
            </GridLayout>
        </GridLayout>
        <GridLayout>
            <GridLayout row="0" visibility="{{ FilteredMovies.length > 0 ? 'visible' : 'collapse' }}">
                <PullRefresh:PullToRefresh refresh="refreshCollection" color="#009940">
                    <ListView ios:backgroundColor="#2b2c2d" items="{{ ViewMode == 'Movies' ? FilteredMovies : Shows }}" itemTap="selectMovie" class="movie-list">
                        <ListView.itemTemplate>
                            <GridLayout rows="auto" columns="auto, *">
                                <GridLayout columns="auto" rows="auto" class="favorite-wrap" tap="toggleFavorite">
                                    <Image class="icon-image" src="{{ Favorite ? 'res://star_green' : 'res://star_white' }}" />
                                </GridLayout>
                                <StackLayout col="1" class="info-wrap">
                                    <Label text="{{ Title }}" class="bold info-bigger" />
                                    <Label text="{{ Type == 'Movie' ? Format : Year }}" class="info-orange" />
                                </StackLayout>
                            </GridLayout>
                        </ListView.itemTemplate>
                    </ListView>
                </PullRefresh:PullToRefresh>
            </GridLayout>
            <Label text="Please search to start adding movies..." visibility="{{ FilteredMovies.length == 0 ? 'visible' : 'collapse' }}" />
            <ActivityIndicator busy="{{ IsLoading }}" row="1" horizontalAlignment="center" verticalAlignment="center" />
        </GridLayout>
    </StackLayout>
</Page>
